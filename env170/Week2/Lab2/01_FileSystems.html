<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Week 2 Lab - 2&nbsp; File systems in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./02_ImportData.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01_FileSystems.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">File systems in R</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Week 2 Lab</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_FileSystems.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">File systems in R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_ImportData.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Importing data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_WorkingWithData.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Working with data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_ExportingData.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Exporting data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_WrappingUp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Wrapping up</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_Week2LabExercise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week 2 Lab Exercise</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#r-projects-and-the-working-directory" id="toc-r-projects-and-the-working-directory" class="nav-link active" data-scroll-target="#r-projects-and-the-working-directory">R projects and the working directory</a></li>
  <li><a href="#saving-a-file-to-the-working-directory" id="toc-saving-a-file-to-the-working-directory" class="nav-link" data-scroll-target="#saving-a-file-to-the-working-directory">Saving a file to the working directory</a></li>
  <li><a href="#working-with-directories" id="toc-working-with-directories" class="nav-link" data-scroll-target="#working-with-directories">Working with directories</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">File systems in R</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>During the first lecture this week, we discussed some strategies for keeping files organized. Today’s lab will assume that you are using a hierarchical file structure that you are comfortable with.</p>
<section id="r-projects-and-the-working-directory" class="level3">
<h3 class="anchored" data-anchor-id="r-projects-and-the-working-directory">R projects and the working directory</h3>
<p>R projects are a useful way to keep track of all the files (scripts, data, and outputs) associated with a specific activity. Open the File drop-down menu and select <strong>New Project.</strong> You should see the following window:</p>
<p><img src="Week2Static/NewProject.jpg" class="img-fluid"></p>
<p>Select <strong>New Directory</strong>. That will bring up this window:</p>
<p><img src="Week2Static/NewProject2.jpg" class="img-fluid"></p>
<p>This window gives you quite a few options for different project types. We’ll learn more about some of these, particularly Quarto documents, later in the course. These give us ways to combine code and text (and more) into a single, shareable document. The lecture slides and lab sheets are all generated as Quarto documents.</p>
<p>For now, let’s just select <strong>New Project</strong>. That brings up this window:</p>
<p><img src="Week2Static/NewProject3.jpg" class="img-fluid"></p>
<p>At this point, we are creating the <em>working directory</em>. The working directory is the current folder that R is using to read and write files.</p>
<p>You have two tasks here: the first is to figure out the folder where you want to put the working directory, and then to give the working directory its own a folder name. To figure out where to put the working directory, you can use the <strong>Browse</strong> button to navigate to the folder you want to use. We discussed hierarchical folder structures earlier this week, and I suggest keeping this in mind as you select a folder to store this project. As you can see in the image, I’m keeping things in Box, in a folder structure that goes</p>
<p><em>Box/Courses/ENV170/Week2</em></p>
<p>You may have a different structure that works for you. Whatever you do, don’t select a folder on a lab computer hard drive! These are wiped clean each night, which will erase any work you’ve done.</p>
<p>Now it’s time to name the working directory. I’m going to call this directory <em>Week2Lab</em>, and I suggest you do the same as it will help the rest of the lab make sense. In practice you can call this directory anything you like, but it’s worth keeping in mind some of the file naming conventions we discussed earlier. Once you’re done here, you can click <strong>Create Project</strong>.</p>
<p>Now RStudio should be open, with the R opening text in the console, and the Files tab open in the Output pane. It should look something like this:</p>
<p><img src="Week2Static/Files1.jpg" class="img-fluid"></p>
<p>This is showing the contents of the Week2Lab folder, which is our working directory. The only item inside should be the project (.Rproj) file, which tells R about the working directory and file environment when you open the project later.</p>
<p>The important thing to remember now is that this directory is where R is working. This means that R will assume that files you want to import will come from here, and any files it generates will be saved here by default.</p>
</section>
<section id="saving-a-file-to-the-working-directory" class="level3">
<h3 class="anchored" data-anchor-id="saving-a-file-to-the-working-directory">Saving a file to the working directory</h3>
<p>Let’s test this out. First, go to the File drop-down menu and select <em>New</em>, and then <em>R Script</em>. We used these last week, but as a reminder, these are text files that can be used to write and run R code.</p>
<p>Next, let’s add some code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot iris data</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(iris<span class="sc">$</span>Petal.Length,iris<span class="sc">$</span>Petal.Width)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This code should look familiar: it’s the <code>plot</code> function, which creates a scatterplot using two vectors as the x and y variables. Here we are using it to plot the <code>iris</code> dataset: a well-known set of data about irises collected in the early 20th century. This is built in to R mostly for learning and testing purposes.</p>
<p>If you select this code and click <strong>Run</strong> (or push <strong>Ctrl + Enter</strong>), you should see a plot that looks like this:</p>
<p><img src="Week2Static/iris1.png" class="img-fluid"></p>
<p>You can take a minute to look at this plot and note any interesting patterns. To save the script, we can go to the File drop-down menu and select <strong>Save</strong>. This will bring up a dialog box that should show the working directory. Give the script file a name like <em>irisPlot</em> to indicate what it is and then click <strong>Save.</strong> You should now see it show up in the Files tab of the Output pane:</p>
<p><img src="Week2Static/Files2.jpg" class="img-fluid"></p>
</section>
<section id="working-with-directories" class="level3">
<h3 class="anchored" data-anchor-id="working-with-directories">Working with directories</h3>
<p>There are three main ways to interact with the file system in R: from the command line, from the File tab in the Output pane, and from outside of RStudio. You may find one of these works better for you, but you’ll also probably end up using all of these different approaches from time to time so it’s good to cover them all.</p>
<section id="from-the-command-line" class="level4">
<h4 class="anchored" data-anchor-id="from-the-command-line">From the command line</h4>
<p>From time to time, you may find that you are not sure which directory you are working in, especially if you end up opening files from multiple projects. To get the current working directory from R, you can use the <code>getwd</code> function:</p>
<p><code style="color: blue">getwd()</code></p>
<p>This returns the following directory path:</p>
<p><strong><code>[1] "C:/Users/bdav_/Box/Courses/ENV170/Week2/Week2Lab"</code></strong></p>
<p>Yours will likely look different than mine, but it should be the complete path all the way back to the hard drive where your work is stored (here it is the C drive). There’s a couple of interesting things to notice about this:</p>
<ul>
<li><p>This function doesn’t take any arguments. There are a few function in R that don’t require any arguments to run, and this is one of them. In such cases, you can just use open and closed parentheses <code>()</code> after the function name.</p></li>
<li><p>When R refers to a directory path, it uses forward slash <code>/</code> rather than the backslash (<code>\</code>). This is to avoid conflicts with string escapes (e.g., <code>\t</code> to insert a horizontal tab in a character string). You can also use double backslash (<code>\\</code>).</p></li>
</ul>
<p>If you ever need to manually change the working directory, you can use the <code>setwd</code> function, which only takes a string with the working directory. You can try this out with the following code, replacing <em><code>your-working-directory</code></em> with the path to your own working directory:</p>
<p><code style="color: blue">setwd("your-working-directory")</code></p>
<p>If you’ve forgotten what that path is, you can use <code>getwd</code> or you’ll see it at the top of the Files tab in the Output pane:</p>
<p><img src="Week2Static/Files3.jpg" class="img-fluid"></p>
<p>You can create a new folder inside the working directory (called a <em>subdirectory</em>) using the <code>dir.create</code> function. For example:</p>
<p><code style="color: blue">dir.create("TisButAFolder")</code></p>
<p>This function takes the name of a folder as a character string argument. Now if you look in the File tab, you should see this new subdirectory:</p>
<p><img src="Week2Static/Files4.jpg" class="img-fluid"></p>
<p>At this point you could save things to this folder, but let’s say we created this folder by mistake. We can delete a subdirectory using the <code>unlink</code> function:</p>
<p><code style="color: blue">unlink("TisButAFolder", recursive = TRUE)</code></p>
<p>Like magic, the folder is gone. The <code>recursive = TRUE</code> argument here tells R to delete the directory itself, not just the files within. There are additional functions for dealing with files from the command line, such as:</p>
<ul>
<li><p><code>list.files</code> If you provide a directory path to this function, it will tell you the names of all the files in it.</p></li>
<li><p><code>list.dirs</code> Same, but for subdirectories</p></li>
<li><p><code>file.choose</code> This function will open a File Selection window that will allow you to navigate to file on your machine. It is another function that doesn’t require any arguments to run.</p></li>
</ul>
</section>
<section id="from-the-files-tab" class="level4">
<h4 class="anchored" data-anchor-id="from-the-files-tab">From the Files tab</h4>
<p>The Files tab on RStudio looks much like a File Explorer window on most computers. Right now, it should be pointed at the working directory, so you should be able to see the R project file and the <em>irisPlot.R</em> script. There’s a few different ways to navigate here:</p>
<ul>
<li><p>Try clicking on the two-dot ellipsis (..) at the top of the list. This will take you into the next folder level up, also called the <em>parent directory</em>. In my case, this is the Week2 folder.</p></li>
<li><p>Try clicking on the folder called Week2Lab. This will take you back into that directory.</p></li>
<li><p>Try clicking on the three-dot ellipsis (…) at the far right of the This opens up a File Explorer window where you can navigate to a new directory. Use this to back up to the parent directory.</p></li>
<li><p>Click the small blue cube with an R in it next to the three-dot ellipsis. This will immediately take you back to the working directory.</p></li>
</ul>
<p>There are a few buttons at the top of this window to do some additional file operations. We’ll look at first three:</p>
<ul>
<li><p><strong>New Folder</strong> This will let you add a new subdirectory in whatever directory you are currently viewing. Create one called <em>TisButAnotherFolder.</em> Click <strong>OK</strong>. Once it is there, click on that folder to open it.</p></li>
<li><p><strong>New Blank File</strong> This is a drop-down menu to quickly create a blank file. Create an R Script called <em>TisButAScript.R</em>. Click <strong>OK</strong>, then use the R cube button to return to the working directory.</p></li>
<li><p><strong>Delete</strong> This deletes whatever is selected in the File tab. Click the check box next to the <em>TisButAnotherFolder</em> folder and click delete. You’ll get a warning about this being permanent. Click <strong>Yes</strong>. You’ll then get a second warning about the script we had in there.</p></li>
</ul>
<p>It’s also worth taking a look at the <strong>More</strong> drop-down menu, as this has a number of other file operations, like Copy and Paste. The Set As Working Directory option will turn whatever folder is open in the File tab and turn that into the working directory. Finally, you can use <strong>Show Folder in New Window</strong> to open the current folder in a File Explorer window outside of R. Try that one out before we move on to the next section.</p>
</section>
<section id="from-outside-rstudio" class="level4">
<h4 class="anchored" data-anchor-id="from-outside-rstudio">From outside RStudio</h4>
<p>It’s really important to recognize that the file structures we are using in RStudio are also part of the file system of the computer you are working on. It can be helpful to know how to access these folders and files from outside R as well. Here, I’ll explain how to do this if your setup is similar to mine, using Windows 11 and Box.</p>
<ol type="1">
<li><p>Open the <strong>File Explorer</strong> by clicking the folder icon on the taskbar. Looks like this:</p>
<p><img src="Week2Static/iconFE.jpg" class="img-fluid"></p></li>
<li><p>On the left-hand side, you should see a series of options for different directories (e.g., Desktop, Download, etc.). Navigate to <strong>Box</strong> and expand it.</p></li>
<li><p>Inside Box, you’ll have a set of subdirectories based on what you have saved there. Navigate to the top-level folder where you keep your coursework and expand it. For me, this is a folder called <em>Courses</em>.</p></li>
<li><p>Continue to expand until you reach the folder where your project is stored, the working directory. Remember, you can always check this using <code>getwd()</code> or looking at the top of the File tab. For me, this is <em>Courses/ENV170/Week2/Week2Lab</em></p></li>
<li><p>Highlight that folder</p></li>
</ol>
<p>Now you should be in a folder that looks like this:</p>
<p><img src="Week2Static/Week2LabFolder.jpg" class="img-fluid"></p>
<p>Congrats, you’re in the working directory! You can now use the mouse to add files by dragging them, or your can copy and paste them from another folder. To delete files, just highlight them and press delete!</p>
<p>The way to find your working directory outside RStudio will vary somewhat between operating systems (e.g., Windows, iOS, Linux) and hardware configurations (hard drives, partitions, etc.). This will also be true if you’re working from a cloud-based storage option like Box that you access from more than one machine. For this reason, it is a good idea to get familiar with how folders and files are organized on your computer.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself!
</div>
</div>
<div class="callout-body-container callout-body">
<p>As the course goes on, you’ll be downloading data from a number of different sources, and this data will need to make its way to your R project. Let’s get used to doing this whenever we start a lab or assignment.</p>
<p>From the File tab, create a new subdirectory in your working directory called <em>Code</em> and move the irisPlot.R file there.</p>
<p>From the command line, create new subdirectories in your working directory called <em>Data</em> and <em>Outputs</em></p>
<p>Go to the Week 2 module on Canvas and download the <em>Week2Data.zip</em> file to the Downloads folder on your computer.</p>
<p>From outside of R, find the <em>Week2Data.zip</em> file and unzip it in your Downloads folder, then move the contents ofthat folder to the Data subdirectory (there should be no additional subdirectories inside your Data folder)</p>
</div>
</div>
<p>This section is meant to help you become familiar with how to work with file systems. The most important thing is that you try and keep the files associated with a project together in a working directory and to keep that directory organized. It’s OK if you don’t know exactly where things are yet, or all of the functions you’d use, just remember that you have a few different options as how to navigate the file system.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./02_ImportData.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Importing data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>