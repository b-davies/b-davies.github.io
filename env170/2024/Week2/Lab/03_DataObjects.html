<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Getting to know R and RStudio - 3&nbsp; Looking closer at data objects in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04_MyFirstPlot.html" rel="next">
<link href="./02_CommandLine.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03_DataObjects.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Looking closer at data objects in R</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Getting to know R and RStudio</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_Navigating.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Navigating RStudio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_CommandLine.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Working with R at the command line</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_DataObjects.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Looking closer at data objects in R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_MyFirstPlot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">My first plot</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_WrappingUp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Wrapping up</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#atomic-vectors" id="toc-atomic-vectors" class="nav-link active" data-scroll-target="#atomic-vectors">Atomic vectors</a></li>
  <li><a href="#class-objects" id="toc-class-objects" class="nav-link" data-scroll-target="#class-objects">Class objects</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="DataObjectsInR" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Looking closer at data objects in R</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Data are individual pieces of information, while datasets are a way of structuring and organizing data related to a body of work. R stores both data and datasets as different kinds of objects. This section discusses a number of the commonly-encountered object types in R. Try out the examples, but don‚Äôt worry if it doesn‚Äôt all stick right away. If you run into a problem with object types, it‚Äôs helpful just to know that different types of objects exist.</p>
<section id="atomic-vectors" class="level3">
<h3 class="anchored" data-anchor-id="atomic-vectors">Atomic vectors</h3>
<p>Atomic vectors are the primary way that R stores data. These can be used in expressions and functions, or combined into compound class objects (see below). An atomic vector with a single value is sometimes called a <strong>scalar</strong>.</p>
<p>The main rule with vectors is that they are comprised of a single type of data. You can determine what type of data a vector contains using the <code>typeof</code> function. There are a few of these, but by far the most common are <strong>numeric</strong>, <strong>logical</strong>, and <strong>character</strong> vectors.</p>
<section id="numeric" class="level4">
<h4 class="anchored" data-anchor-id="numeric">Numeric</h4>
<p>As shown above, R can interpret numbers in the same way a calculator does. There are two categories of numeric vectors: integer and double. An integer is stored as a whole number, while a double number can be any number, but includes storage space for decimal values<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Some mathematical terms that count as numerical objects are either built into R, such as using <code>pi</code> for ùúã, or require some minor coding, like <code>exp(1)</code> for <em>e</em>. Below you can see some examples and how R interprets them.</p>
<table class="caption-top table">
<caption>Numerical objects in R</caption>
<thead>
<tr class="header">
<th>Command line</th>
<th>R value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>42</td>
<td><code>42</code></td>
</tr>
<tr class="even">
<td>867.5309</td>
<td><code>867.5309</code></td>
</tr>
<tr class="odd">
<td>pi</td>
<td><code>3.141593</code></td>
</tr>
<tr class="even">
<td>exp(1)</td>
<td><code>2.718282</code></td>
</tr>
<tr class="odd">
<td>sqrt(4)</td>
<td><code>2</code></td>
</tr>
</tbody>
</table>
<p>An important thing to keep in mind here is that R treats all numbers as double type by default, and for this course we‚Äôll be using numbers stored as double type pretty much exclusively. There are computational reasons why you might want to store values as integers (conserving space, converting to another coding language that requires integers, etc.), but these are rare for most data analysis and visualization activities.</p>
</section>
<section id="logical" class="level4">
<h4 class="anchored" data-anchor-id="logical">Logical</h4>
<p>A logical (or Boolean) vector in R has values of either TRUE or FALSE, or shortened to T and F, and these are always expressed in capital letters. Some operations in R will return values as either TRUE or FALSE, while some functions may require input in the form of a logical value. Here are some examples:</p>
<p><code style="color: blue">2 == 2</code></p>
<p><code>[1] TRUE</code></p>
<p><code style="color: blue">2 == 3</code></p>
<p><code>[1] FALSE</code></p>
<p><code style="color: blue">s&lt;-2==3</code></p>
<p><code style="color: blue">typeof(s)</code></p>
<p><code>[1] "logical"</code></p>
<p>One thing to note here is that, when determining equivalence, a double equals sign (<code>==</code>) is used. This is because a single equals sign (<code>=</code>) is another way of assigning a values to variables.</p>
</section>
<section id="character" class="level4">
<h4 class="anchored" data-anchor-id="character">Character</h4>
<p>A character vector (also referred to as a string) is text that is meant to be read as text. R cannot interpret the meaning of the text directly, but some functions require character vectors for input. Elements in a character vector are surrounded by quote marks (<code>"</code>)<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<p><code style="color: blue">text&lt;-"text"</code></p>
<p><code style="color: blue">typeof(text)</code></p>
<p><code>[1] "character"</code></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it yourself!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Double, logical, or character: what type of data would the following produce? Make your best guess for each item, and then use the <code>typeof</code> function to check your answers:</p>
<ul>
<li><p>2+2</p></li>
<li><p>(2+2)==4</p></li>
<li><p>T</p></li>
<li><p>typeof(42)</p></li>
<li><p>‚Äúfalse‚Äù</p></li>
</ul>
</div>
</div>
</section>
<section id="using-vectors-to-store-data" class="level4">
<h4 class="anchored" data-anchor-id="using-vectors-to-store-data">Using vectors to store data</h4>
<p>For work in data analysis and visualization, these different kinds of objects are used to store different kinds of information. For example, if we were conducting a study of recreational shellfish harvesting at Cape Cod beaches, character vectors might be used to record the names of the shellfish species, while numerical vectors could be used for things like species counts.</p>
<p>A vector is a collection of objects of a single type, presented as an ordered row. Each object in a vector has a value as well as a position. Vectors can be created by entering the objects, separated by commas, into a parentheses with a <em>c</em> at the front (e.g., <code>c()</code>). Here, we‚Äôll create two vectors for counts of two different kinds of clams:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="InClassStatic/640px-Mya_arenaria_(YPM_IZ_033355).jpeg" class="img-fluid figure-img"></p>
<figcaption>Soft-shelled clam (<em>Mya arenaria</em>) (Public domain)</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="InClassStatic/mercenaria.jpg" class="img-fluid figure-img"></p>
<figcaption>Quahog (<em>Mercenaria mercenaria</em>) (Public domain)</figcaption>
</figure>
</div>
<p>Let‚Äôs say we‚Äôve done counts for these two shellfish types at 9 different sites. First, a vector of 9 counts for the soft-shelled clams:</p>
<p><code style="color: blue">Mya&lt;-c(45,38,75,62,19,62,60,89,26)</code></p>
<p>Then another 9 counts for the quahogs:</p>
<p><code style="color: blue">Mercenaria&lt;-c(65,56,58,57,34,89,65,61,91)</code></p>
<p>These data are purely fictional, but we can use them to show some key aspects of working with vector data. Individual objects or groups of objects in a vector can be accessed by entering the name of the vector with their position number into a set of square brackets (<code>[]</code>).</p>
<p><code style="color: blue">Mya[5]</code></p>
<p><code>[1] 19</code></p>
<p>For multiple objects, the individual positions can be entered followed by commas, or a run of values can be expressed using the first and last positions separated by a colon (<code>:</code>) .</p>
<p><code style="color: blue">Mercenaria[1:3]</code></p>
<p><code>[1] 65 56 58</code></p>
<p>And, as was the case for vectors of single values, the type of vector is determined by the kinds of atomic objects it contains:</p>
<p><code style="color: blue">typeof(Mercenaria)</code></p>
<p><code>[1] "double"</code></p>
<p>There are lots of different ways you might create a vector. For example, you can create vectors using a function like we did with the <code>rep</code> function above. You can also combine multiple existing vectors within a single vector. Here, we will create a vector with 9 instances of each genus name:</p>
<p><code style="color: blue">genus&lt;-c(rep("Mya",9),rep("Mercenaria",9))</code></p>
<p>Now, we can take a look:</p>
<p><code style="color: blue">genus</code></p>
<p><code>[1] "Mya"        "Mya"        "Mya"        "Mya"        "Mya"</code></p>
<p><code>[6] "Mya"        "Mya"        "Mya"        "Mya"        "Mercenaria"</code></p>
<p><code>[11] "Mercenaria" "Mercenaria" "Mercenaria" "Mercenaria" "Mercenaria"</code></p>
<p><code>[16] "Mercenaria" "Mercenaria" "Mercenaria"</code></p>
<p>Remember that each number at left is indicating the position of the value that starts that line. Finally, we can look at what kind of</p>
<p><code style="color: blue">typeof(genus)</code></p>
<p><code>[1] "character"</code></p>
<p>We can also create a vector of the count data, called <strong>count</strong>, by combining the two vectors of count data:</p>
<p><code style="color: blue">count&lt;-c(Mya,Mercenaria)</code></p>
<p>And when we ask R to return this value:</p>
<p><code style="color: blue">count</code></p>
<p><code>[1] 60 61 55 62 59 62 60 59 56 65 56 58 57 64 59 65 61 58</code></p>
<p>However, it will be a rare instance where you would do data entry directly into R. Most of the time, we will read data in from a file. If you look at the File tab in the Output pane, you should see a file called <strong>shellLengths.txt</strong> containing the average shell lengths in inches at each site. If you click on this, you should see this come up in a tab in Source pane:<br>
<img src="InClassStatic/shellLengths.JPG" class="img-fluid" alt="Text file in the Source pane"></p>
<p>An important thing to keep in mind here is that even though you can see them here, R needs instructions to read them. You can read these numbers into R as a vector called <strong>meanLength</strong> using the <code>scan</code> function:</p>
<p><code style="color: blue">meanLength&lt;-scan("shellLengths.txt")</code></p>
<p>Now, if we ask R for the meanLength variable‚Ä¶</p>
<p><code style="color: blue">meanLength</code></p>
<p>‚Ä¶it gives us back the following:</p>
<p><code>[1] 3.4 2.7 3.6 3.3 2.3 3.5 3.6 3.9 2.4 3.5 3.4 3.5 3.6 3.7 3.3 3.4 3.5 3.6</code></p>
<p>Reading and writing from files is an important aspect of working with data and is something we‚Äôll cover in more depth next week. But for now just keep in mind that R is capable of putting together data in lots of different ways.</p>
</section>
</section>
<section id="class-objects" class="level3">
<h3 class="anchored" data-anchor-id="class-objects">Class objects</h3>
<p>In R, datasets are stored as <strong>class objects</strong>. These can be made up of multiple atomic vectors and, sometimes, multiple class objects. For our purposes, the most commonly used class object will be the dataframe:</p>
<section id="dataframes" class="level4">
<h4 class="anchored" data-anchor-id="dataframes">Dataframes</h4>
<p>A dataframe is a table of data, where each column contains data belonging to a single type (e.g., numeric, character, logical). If you‚Äôve ever used a spreadsheet, the data in a dataframe is organized similarly with columns and rows. Many data operations in R make use of dataframes to organize data. You can create a dataframe from a set of vectors using the <code>data.frame</code> function:</p>
<p><code style="color: blue">shellfish&lt;-data.frame(genus,count,meanLength)</code></p>
<p>Here, we‚Äôve created a dataframe called <strong>shellfish</strong>, and it is comprised of three vectors. We can look at it by entering its name into the command prompt:</p>
<p><code style="color: blue">shellfish</code></p>
<p>And the output looks like this:</p>
<p><code>genus count meanLength</code></p>
<p><code>1         Mya    45        3.4</code></p>
<p><code>2         Mya    38        2.7</code></p>
<p><code>3         Mya    75        3.6</code></p>
<p><code>4         Mya    62        3.3</code></p>
<p><code>5         Mya    19        2.3</code></p>
<p><code>6         Mya    62        3.5</code></p>
<p><code>7         Mya    60        3.6</code></p>
<p><code>8         Mya    89        3.9</code></p>
<p><code>9         Mya    26        2.4</code></p>
<p><code>10 Mercenaria    65        3.5</code></p>
<p><code>11 Mercenaria    56        3.4</code></p>
<p><code>12 Mercenaria    58        3.5</code></p>
<p><code>13 Mercenaria    57        3.6</code></p>
<p><code>14 Mercenaria    34        3.7</code></p>
<p><code>15 Mercenaria    89        3.3</code></p>
<p><code>16 Mercenaria    65        3.4</code></p>
<p><code>17 Mercenaria    61        3.5</code></p>
<p><code>18 Mercenaria    91        3.6</code></p>
<p>Here you can see the dataframe has three columns: genus, count, and meanLength, each corresponding to the vectors we used to create it. You can see the column names at the top of the dataframe, and on the left you can see row numbers. You can access the rows and columns by using square brackets (<code>[]</code>), similarly to how you would with a vector. To get a single value, you can</p>
<p>You can also access named columns by using the dollar sign (<code>$</code>) immediately following the name of the dataframe. For example, entering the following‚Ä¶</p>
<p><code style="color: blue">shellfish$count</code></p>
<p>‚Ä¶will return the values from the count column:</p>
<p><code>[1] 45 38 75 62 19 62 60 89 26 65 56 58 57 34 89 65 61 91</code></p>
</section>
<section id="other-class-objects" class="level4">
<h4 class="anchored" data-anchor-id="other-class-objects">Other class objects</h4>
<p>By far, vectors and dataframes are the most common class objects we will deal with in this class. There are other class data objects that are important for working in R, and many functions and packages will have their own object types that combine multiple In particular</p>
<ul>
<li><p>Lists</p></li>
<li><p>Matrices</p></li>
<li><p>Arrays</p></li>
</ul>
<p>We‚Äôll cover these later in the course, but for now just keep in mind that these exist and you might see these referenced in R help documentation from time to time. There are also objects that are unique to functions and packages. For example, the <code>hist</code> function returns a <strong>histogram</strong> class object. These are usually composites of some the objects we‚Äôve discussed already (e.g., a list of vectors). We will talk about a couple of these later on and how to break down their structures into simpler parts.</p>
<p>We‚Äôll be using dataframes almost exclusively for the first few weeks to store structured datasets. Eventually, we will also look at another table structure called a tibble, which is frequently used in the tidyverse set of packages. Stay tuned!</p>


</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>The term <em>double</em> refers to ‚Äú<a href="https://en.wikipedia.org/wiki/Double-precision_floating-point_format" title="Definition at Wikipedia">double precision floating point</a>.‚Äù<a href="#fnref1" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
<li id="fn2"><p>R will treat double (‚Äú) and single (‚Äô) quote marks in the same way. However, the convention is to use double quotes to mark the beginning and end of a string of characters, and to reserve single quotes for instances where the string itself contains quote marks. For example:</p>
<p><code>text&lt;-"Character objects are sometimes referred to as 'string' objects."</code><a href="#fnref2" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02_CommandLine.html" class="pagination-link" aria-label="Working with R at the command line">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Working with R at the command line</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04_MyFirstPlot.html" class="pagination-link" aria-label="My first plot">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">My first plot</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>